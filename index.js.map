{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\n\nconst API_KEY = '41712066-bd7b5e249df7a86bd45ef70ea';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nconst BASE_PARAMS = {\n  key: API_KEY,\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  per_page: 30,\n};\n\nexport const fetchImages = async (query, page = 1) => {\n  const q = (query ?? '').trim();\n\n  if (q === '') {\n    iziToast.info({\n      message: 'Sorry, enter a word to search!',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  const param = new URLSearchParams({ ...BASE_PARAMS, q, page });\n  const url = `${BASE_URL}?${param.toString()}`;\n  const response = await axios.get(url);\n\n  return response.data;\n};\n","export const createCard = img => {\n  return `<li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=\"${img.largeImageURL}\">\n      <img\n        class=\"gallery-image\"\n        src=\"${img.webformatURL}\"\n        alt=\"${img.tags}\"\n        />\n    </a>\n    <div class=\"container-description-img\">\n        <div class=\"description-item\">\n          <span class=\"img-label\">likes</span>\n          <span class=\"img-value\">${img.likes}</span>\n        </div>\n        <div class=\"description-item\">\n          <span class=\"img-label\">views</span>\n          <span class=\"img-value\">${img.views}</span>\n        </div>\n         <div class=\"description-item\">\n          <span class=\"img-label\">comments</span>\n          <span class=\"img-value\">${img.comments}</span>\n        </div>\n           <div class=\"description-item\">\n          <span class=\"img-label\">downloads</span>\n          <span class=\"img-value\">${img.downloads}</span>\n        </div>\n    </div>\n  </li>\n  `;\n};\n","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\n\nimport { fetchImages } from './js/pixabay-api';\nimport { createCard } from './js/render-functions';\n\nconst refs = {\n  listImg: document.querySelector('.gallery'),\n  formSearch: document.querySelector('.form'),\n  loader: document.querySelector('.loader'),\n  loadMore: document.querySelector('.js-load-more'),\n};\n\nlet inputValue = null;\nlet page = null;\nrefs.loader.style.display = 'none';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst onFormSearchSubmit = async e => {\n  e.preventDefault();\n  inputValue = e.target.elements.search.value;\n  page = 1;\n\n  if (!inputValue) return;\n\n  refs.loader.style.display = 'block';\n\n  try {\n    const res = await fetchImages(inputValue);\n\n    console.log(res);\n\n    if (!res.hits.length) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      refs.listImg.innerHTML = '';\n      refs.formSearch.reset();\n      return;\n    }\n\n    if (res.hits.length < res.total) {\n      refs.loadMore.classList.remove('is-hiden');\n    }\n\n    const card = res.hits.map(card => createCard(card)).join('');\n    refs.listImg.innerHTML = card;\n    refs.formSearch.reset();\n    lightbox.refresh();\n  } catch (err) {\n    console.log(err.status);\n  } finally {\n    refs.loader.style.display = 'none';\n  }\n};\n\nconst onLoadMoreSubmit = async e => {\n  e.preventDefault();\n  page++;\n\n  try {\n    const res = await fetchImages(inputValue, page);\n    console.log(res);\n\n    if (Math.ceil(res.total / res.hits.length) >= page) {\n      refs.loadMore.classList.add('is-hiden');\n    }\n\n    const card = res.hits.map(card => createCard(card)).join('');\n    // console.log(card);\n\n    refs.listImg.insertAdjacentHTML('beforeend', card);\n\n    lightbox.refresh();\n  } catch (err) {\n    console.log(err.status);\n  } finally {\n    refs.loader.style.display = 'none';\n  }\n};\nrefs.formSearch.addEventListener('submit', onFormSearchSubmit);\n\nrefs.loadMore.addEventListener('click', onLoadMoreSubmit);\n\n// fetchImages(inputValue)\n//   .then(res => {\n//     if (!res.hits.length) {\n//       iziToast.error({\n//         message:\n//           'Sorry, there are no images matching your search query. Please try again!',\n//         position: 'topRight',\n//       });\n//       refs.listImg.innerHTML = '';\n//       refs.formSearch.reset();\n//       return;\n//     }\n\n//     const card = res.hits.map(card => createCard(card)).join('');\n//     console.log('card', card);\n\n//     refs.listImg.innerHTML = card;\n//     refs.formSearch.reset();\n//     lightbox.refresh();\n//   })\n//   .catch(err => console.log(err.status))\n//   .finally(() => {\n//     refs.loader.style.display = 'none';\n//   });\n"],"names":["API_KEY","BASE_URL","BASE_PARAMS","fetchImages","query","page","q","iziToast","param","url","axios","createCard","img","refs","inputValue","lightbox","SimpleLightbox","onFormSearchSubmit","e","res","card","err","onLoadMoreSubmit"],"mappings":"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"}